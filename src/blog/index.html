<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Telsoc Blog</title>
        <link rel="stylesheet" href="/index.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Official website for Aberystwyth University telsoc" />
    </head>
    
    <body>
        ${include("./src/nav.dev.html")}

        ${
            readdirSync("./src/blog/", {withFileTypes: true})
                .filter(path => path.isDirectory())
                .map(dir => {
                    const template = "./src/blog/postpreview.dev.html";
                    let args = JSON.parse(include(`${dir.path}${dir.name}/post.dev.json`));

                    if (!args.link)
                        args.link = "/blog/" + dir.name;

                    return includeTemplate(template, args);
                })
                .join("")
        }
        
        ${include("./src/footer.dev.html")}
    </body>
</html>
